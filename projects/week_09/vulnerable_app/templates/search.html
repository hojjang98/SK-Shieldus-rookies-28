{% extends "base.html" %}

{% block title %}Search{% endblock %}

{% block content %}
<h2>ğŸ” ê²€ìƒ‰</h2>

<div class="alert alert-warning mb-4">
    <strong>âš ï¸ SQL Injection ì·¨ì•½ì :</strong> ì´ ê²€ìƒ‰ ê¸°ëŠ¥ì€ SQL Injectionì— ì·¨ì•½í•©ë‹ˆë‹¤.
</div>

<form method="GET" action="/search" class="mb-4">
    <div class="input-group input-group-lg">
        <input type="text" class="form-control" name="q" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." value="{{ query }}">
        <button class="btn btn-primary" type="submit">ê²€ìƒ‰</button>
    </div>
    <small class="text-muted">
        <strong>SQL Injection í…ŒìŠ¤íŠ¸:</strong> 
        <code>' OR '1'='1</code> ë˜ëŠ” 
        <code>' UNION SELECT username, password, email, role FROM users--</code>
    </small>
</form>

{% if query %}
<h4>ê²€ìƒ‰ ê²°ê³¼: "{{ query }}"</h4>
<div class="table-responsive">
    <table class="table table-striped">
        <thead class="table-dark">
            <tr>
                <th>ë²ˆí˜¸</th>
                <th>ì œëª©</th>
                <th>ë‚´ìš©</th>
                <th>ì‘ì„±ì</th>
            </tr>
        </thead>
        <tbody>
            {% for result in results %}
            <tr>
                <td>{{ result.id }}</td>
                <td>{{ result.title }}</td>
                <td>{{ result.content }}</td>
                <td>{{ result.author }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" class="text-center">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock %}
